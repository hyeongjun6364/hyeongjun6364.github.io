(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[737],{6433:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var n=r(9499),o=r(6835),i=r(7812),s=r(29),a=r(7794),u=r.n(a),c=r(7294),l=r(246),p=r.n(l),d=r(6154),f=r(9790);var h=(0,f.Z)("div",{target:"e1ayoctn6"})({name:"b58ens",styles:"height:calc(100vh - 90px);overflow:hidden"}),v=(0,f.Z)("div",{target:"e1ayoctn5"})({name:"h6qply",styles:"display:flex;flex-direction:column;margin-top:20px;padding:20px;flex-grow:1;max-height:calc(100vh - 90px);overflow-y:auto"}),y=(0,f.Z)("div",{target:"e1ayoctn4"})({name:"1gp8eof",styles:"display:flex;flex-wrap:wrap;gap:10px;margin-bottom:10px;justify-content:center"}),b=(0,f.Z)("button",{target:"e1ayoctn3"})("background-color:",(function(e){return e.active?"#5eb6f6":"#f0f0f0"}),";color:",(function(e){return e.active?"#fff":"#000"}),";border:none;border-radius:5px;padding:5px 10px;cursor:pointer;"),m=(0,f.Z)("button",{target:"e1ayoctn2"})({name:"10nz3m",styles:"background-color:#5eb6f6;color:#fff;border:none;border-radius:5px;padding:5px 10px;cursor:pointer"}),g=(0,f.Z)("div",{target:"e1ayoctn1"})({name:"1svgwku",styles:"background-color:#fff;border:1px solid #e0e0e0;border-radius:10px;padding:20px;margin-bottom:20px"}),w=(0,f.Z)("input",{target:"e1ayoctn0"})({name:"q5kbd0",styles:"width:50%;padding:10px;border-radius:20px;margin-bottom:2%;border-color:#5eb6f6"}),x=r(1163),k=function(){var e=(0,s.Z)(u().mark((function e(t,r){var n,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.post("http://backend-practice.codebootcamp.co.kr/graphql",{query:'\n              query {\n                fetchUseditems(\n                  isSoldout: false\n                  search: "'.concat(r||"",'"\n                  page: ').concat(t,"\n                ) {\n                  _id\n                  name\n                  remarks\n                  contents\n                  price\n                  tags\n                }\n              }\n            ")},{headers:{"Content-Type":"application/json"}});case 3:if(n=e.sent,console.log("API Response:",n.data),!n.data.data){e.next=8;break}return o=n.data.data.fetchUseditems,e.abrupt("return",o);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),console.error("Error fetching study groups:",e.t0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}(),j=k,S=r(2089),_=r(4480),L=r(5893);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=function(){var e=(0,c.useState)([]),t=e[0],r=e[1],a=(0,c.useState)([]),l=a[0],f=a[1],k=(0,c.useState)(1),O=k[0],C=k[1],E=(0,c.useState)(""),Z=E[0],T=E[1],I=(0,c.useState)([]),M=I[0],q=I[1],R=(0,c.useState)({}),D=(R[0],R[1]),W=(0,c.useState)({}),N=W[0],H=W[1],U=(0,c.useState)({}),A=U[0],B=U[1],z=(0,c.useState)([]),Y=(z[0],z[1]),$=((0,_.sJ)(S.qV),(0,x.useRouter)()),J=(0,c.useState)(!0),V=J[0],X=J[1],F=(0,c.useState)(!1),G=F[0],K=F[1];(0,c.useEffect)((function(){localStorage.setItem("studyTags",JSON.stringify(t)),te(1)}),[t,Z]);var Q=function(){var e=(0,s.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.post("http://backend-practice.codebootcamp.co.kr/graphql",{query:"\n            query($boardId: ID!) {\n              fetchBoard(boardId: $boardId) {\n                _id\n                title\n                writer\n              }\n            }\n          ",variables:{boardId:t},headers:{"content-type":"application/json"}});case 3:return r=e.sent,n=r.data.data.fetchBoard,e.abrupt("return",parseInt(n.writer));case 8:return e.prev=8,e.t0=e.catch(0),console.error("\ubcf4\ub4dc \uc815\ubcf4 \uac00\uc838\uc624\uae30 \uc624\ub958:",e.t0),e.abrupt("return",0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e={};l.forEach(function(){var t=(0,s.Z)(u().mark((function t(r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(r._id);case 2:e[r._id]=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),D(e)}),[l]);var ee=function(){var e=(0,s.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.post("http://backend-practice.codebootcamp.co.kr/graphql",{query:"\n            query($boardId: ID!) { \n              fetchBoard(\n                boardId: $boardId\n              ){\n                _id\n                writer\n                title\n              }\n            }\n          ",variables:{boardId:t},headers:{"Content-Type":"application/json"}});case 3:return r=e.sent,n=r.data.fetchBoard,e.abrupt("return",{boardId:t,title:n.title,writer:n.writer});case 8:return e.prev=8,e.t0=e.catch(0),console.error("\uac8c\uc2dc\ud310 \uc870\ud68c \uc624\ub958:",e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=(0,s.Z)(u().mark((function e(t){var r,n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(t,Z);case 3:return r=e.sent,e.next=6,Promise.all(r.map(function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t._id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:n=e.sent,1===t?(f(r),Y(n)):(f((function(e){return[].concat((0,i.Z)(e),(0,i.Z)(r))})),Y((function(e){return[].concat((0,i.Z)(e),(0,i.Z)(n))}))),a=r.reduce((function(e,t){var r=n.find((function(e){return e.boardId===t._id})).title.split("/").map((function(e){return parseInt(e)})),i=(0,o.Z)(r,2),s=i[0],a=i[1];return e[t._id]={title:s,writer:a},e}),{}),B(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error fetching study groups:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.post("http://backend-practice.codebootcamp.co.kr/graphql",{query:'\n            mutation {\n              deleteUseditem(useditemId: "'.concat(t,'")\n            }\n          ')},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}});case 3:e.sent.data.data.deleteUseditem===t&&(f((function(e){return e.filter((function(e){return e._id!==t}))})),alert("\uac8c\uc2dc\uae00\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("\uac8c\uc2dc\uae00 \uc791\uc131\uc790\ub9cc \uc0ad\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ne=Array.from(new Set(l.flatMap((function(e){return e.tags})))),oe=function(e){t.includes(e)?r((function(t){return t.filter((function(t){return t!==e}))})):t.length<3?r((function(t){return[].concat((0,i.Z)(t),[e])})):r((function(t){return[e].concat((0,i.Z)(t.slice(0,2)))})),C(1),f([])},ie=t.length>0?l.filter((function(e){return t.some((function(t){var r;return null===(r=e.tags)||void 0===r?void 0:r.includes(t)}))})):l,se=function(){var e=(0,s.Z)(u().mark((function e(){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V&&!G){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,K(!0),t=O+1,e.next=7,j(t);case 7:(r=e.sent).length>0?(f((function(e){return[].concat((0,i.Z)(e),(0,i.Z)(r))})),C(t),X(!0)):X(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("Error fetching more study groups:",e.t0);case 14:return e.prev=14,K(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{N.hasOwnProperty(t)?(delete N[t],H(P({},N))):H(P(P({},N),{},(0,n.Z)({},t,{title:"",writer:""})))}catch(r){console.error("\uc2a4\ud130\ub514 \ucc38\uac00 \uc5d0\ub7ec \ubc1c\uc0dd:",r),alert("\uc2a4\ud130\ub514 \ucc38\uac00 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,L.jsx)(h,{children:(0,L.jsxs)(v,{children:[(0,L.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,L.jsx)(m,{onClick:function(){$.push("/Study/CreateGroup")},style:{margin:"10px"},children:"\uc2a4\ud130\ub514 \uadf8\ub8f9 \ub4f1\ub85d\ud558\uae30"})}),(0,L.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,L.jsx)(w,{placeholder:"\uc81c\ubaa9\uc774\ub098 \ud0dc\uadf8 \uac80\uc0c9",value:Z,onChange:function(e){return t=e.target.value,T(t),C(1),void f([]);var t}})}),(0,L.jsx)(y,{children:ne&&ne.length>0&&(0,L.jsx)(y,{children:ne.map((function(e){return(0,L.jsxs)(b,{active:t.includes(e),onClick:function(){return oe(e)},children:["#",e]},e)}))})}),(0,L.jsx)(p(),{pageStart:0,loadMore:se,hasMore:V&&!G,useWindow:!1,loader:(0,L.jsx)("div",{children:"Loading..."},0),children:ie.map((function(e){var r,n,o,s;return(0,L.jsxs)(g,{onClick:function(){return t=e._id,void q((function(e){return e.includes(t)?e.filter((function(e){return e!==t})):[].concat((0,i.Z)(e),[t])}));var t},style:{display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[(0,L.jsxs)("div",{children:[(0,L.jsx)("h2",{children:e.remarks}),(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,L.jsx)("div",{children:e.tags?e.tags.slice(0,3).map((function(e){return e?(0,L.jsxs)(b,{active:t.includes(e),onClick:function(){return oe(e)},style:{margin:"2px"},children:["#",e]},e):null})):null}),(0,L.jsxs)("p",{children:["\uc2a4\ud130\ub514 \ud68c\uc7a5: ",e.name]})]})]}),M.includes(e._id)&&(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{dangerouslySetInnerHTML:{__html:e.contents}}),(0,L.jsx)("button",{onClick:function(){return ae(e._id)},children:(null===(r=A[e._id])||void 0===r?void 0:r.title)>=(null===(n=A[e._id])||void 0===n?void 0:n.writer)?"\uc2a4\ud130\ub514 \ud1f4\uc7a5":"\uc2a4\ud130\ub514 \ucc38\uac00"}),M.includes(e._id)&&(0,L.jsxs)("span",{style:{marginLeft:"10px"},children:["\uc2a4\ud130\ub514\ucc38\uac00: ",null===(o=A[e._id])||void 0===o?void 0:o.title,"/",null===(s=A[e._id])||void 0===s?void 0:s.writer]}),(0,L.jsx)("div",{style:{paddingLeft:"91%"},children:(0,L.jsx)("button",{onClick:function(){return re(e._id)},children:"\uac8c\uc2dc\uae00 \uc0ad\uc81c"})})]})]},e._id)}))})]})})}},1430:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Study",function(){return r(6433)}])},2703:function(e,t,r){"use strict";var n=r(414);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,i,s){if(s!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return r.PropTypes=r,r}},5697:function(e,t,r){e.exports=r(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7761:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(7294),i=a(o),s=a(r(5697));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.scrollListener=r.scrollListener.bind(r),r.eventListenerOptions=r.eventListenerOptions.bind(r),r.mousewheelListener=r.mousewheelListener.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(r){}return e}},{key:"eventListenerOptions",value:function(){this.props.useCapture;return this.isPassiveSupported()?{useCapture:this.props.useCapture,passive:!0}:{passive:!1}}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,r=this.getParentElement(e),n=void 0;if(this.props.useWindow){var o=document.documentElement||document.body.parentNode||document.body,i=void 0!==t.pageYOffset?t.pageYOffset:o.scrollTop;n=this.props.isReverse?i:this.calculateOffset(e,i)}else n=this.props.isReverse?r.scrollTop:e.scrollHeight-r.scrollTop-r.clientHeight;n<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=r.scrollHeight,this.beforeScrollTop=r.scrollTop,"function"===typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),r=t.children,n=t.element,o=t.hasMore,s=(t.initialLoad,t.isReverse),a=t.loader,u=(t.loadMore,t.pageStart,t.ref),c=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));c.ref=function(t){e.scrollComponent=t,u&&u(t)};var l=[r];return o&&(a?s?l.unshift(a):l.push(a):this.defaultLoader&&(s?l.unshift(this.defaultLoader):l.push(this.defaultLoader))),i.default.createElement(n,c,l)}}]),t}(o.Component);u.propTypes={children:s.default.node.isRequired,element:s.default.node,hasMore:s.default.bool,initialLoad:s.default.bool,isReverse:s.default.bool,loader:s.default.node,loadMore:s.default.func.isRequired,pageStart:s.default.number,ref:s.default.func,getScrollParent:s.default.func,threshold:s.default.number,useCapture:s.default.bool,useWindow:s.default.bool},u.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=u,e.exports=t.default},246:function(e,t,r){e.exports=r(7761)},7812:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(2587);var o=r(2937);function i(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(e){e.O(0,[774,888,179],(function(){return t=1430,e(e.s=t);var t}));var t=e.O();_N_E=t}]);